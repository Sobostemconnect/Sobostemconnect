<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOBOSTEM CONNECT</title>
    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-auth-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-firestore-compat.min.js"></script>
    <!-- Chatbase Integration -->
    <script>
    (function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="ueRY1tKBYc8cOAS6bnqkW";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
    </script>
    <!-- CSS Styling -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #3498db;
        }

        .logout-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background-color: #c0392b;
        }

        /* Auth forms */
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .auth-title {
            text-align: center;
            margin-bottom: 20px;
            color: #3498db;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #3498db;
        }

        .auth-btn {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .auth-btn:hover {
            background-color: #2980b9;
        }

        .auth-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: #3498db;
            text-decoration: none;
        }

        .auth-link:hover {
            text-decoration: underline;
        }

        /* Dashboard */
        .dashboard {
            display: none;
        }

        .create-post {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .create-post textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: none;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .create-post textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .create-post button {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .create-post button:hover {
            background-color: #2980b9;
        }

        .dashboard-sections {
            display: flex;
            gap: 30px;
        }

        .announcements {
            flex: 2;
        }

        .groups {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }

        .section-title {
            margin-bottom: 20px;
            color: #3498db;
            font-size: 20px;
        }

        .announcement {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .announcement-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .announcement-author {
            font-weight: 600;
        }

        .announcement-date {
            color: #777;
            font-size: 14px;
        }

        .announcement-content {
            margin-bottom: 15px;
        }

        .announcement-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .like-btn, .comment-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 14px;
        }

        .liked {
            color: #e74c3c;
        }

        .comment-form {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .comment-form input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .comment-form button {
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .comments {
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
        }

        .comment {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .comment:last-child {
            border-bottom: none;
        }

        .comment-author {
            font-weight: 500;
            margin-right: 8px;
        }

        .group-list {
            list-style: none;
        }

        .group-item {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 10px;
            background-color: #f0f7ff;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .group-item:hover {
            background-color: #d4e6ff;
        }

        /* Chat Page */
        .chat-page {
            display: none;
        }

        .chat-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-btn {
            margin-right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .chat-group-name {
            font-size: 22px;
            color: #3498db;
        }

        .chat-container {
            height: 500px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 15px;
            max-width: 70%;
        }

        .message-self {
            align-self: flex-end;
            margin-left: auto;
        }

        .message-bubble {
            padding: 10px 15px;
            border-radius: 18px;
            background-color: #f0f0f0;
            display: inline-block;
        }

        .message-self .message-bubble {
            background-color: #3498db;
            color: white;
        }

        .message-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #777;
            margin-top: 5px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            margin-right: 10px;
        }

        .chat-input button {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }

        /* Role selection */
        .role-select {
            margin-bottom: 20px;
        }

        .role-select label {
            margin-right: 15px;
        }

        /* Error message */
        .error {
            background-color: #ffecec;
            color: #e74c3c;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
        
        /* AI Assistant Button */
        .ai-assistant-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .ai-assistant-btn:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <!-- Login / Signup Container -->
    <div class="auth-container" id="loginContainer">
        <h2 class="auth-title">Welcome to SOBOSTEM CONNECT</h2>
        <div class="error" id="loginError"></div>
        <form id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" required>
            </div>
            <button type="submit" class="auth-btn">Login</button>
        </form>
        <a href="#" class="auth-link" id="showSignup">Don't have an account? Sign up</a>
    </div>

    <div class="auth-container" id="signupContainer" style="display: none;">
        <h2 class="auth-title">Create an Account</h2>
        <div class="error" id="signupError"></div>
        <form id="signupForm">
            <div class="form-group">
                <label for="signupName">Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label for="signupEmail">Email</label>
                <input type="email" id="signupEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" placeholder="Create a password" required>
            </div>
            <div class="role-select">
                <label>
                    <input type="radio" name="role" value="student" checked> Student
                </label>
                <label>
                    <input type="radio" name="role" value="teacher"> Teacher
                </label>
            </div>
            <button type="submit" class="auth-btn">Sign Up</button>
        </form>
        <a href="#" class="auth-link" id="showLogin">Already have an account? Login</a>
    </div>

    <!-- Dashboard Container -->
    <div class="container dashboard" id="dashboard">
        <div class="header">
            <div class="logo">SOBOSTEM CONNECT</div>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>

        <div class="create-post">
            <textarea id="announcementText" placeholder="Share an announcement or update..."></textarea>
            <button id="postAnnouncement">Post</button>
        </div>

        <div class="dashboard-sections">
            <div class="announcements">
                <h3 class="section-title">Announcements</h3>
                <div id="announcementsList">
                    <!-- Announcements will be loaded here -->
                </div>
            </div>

            <div class="groups">
                <h3 class="section-title">Group Chats</h3>
                <ul class="group-list" id="groupsList">
                    <!-- Groups will be loaded here -->
                </ul>
                <div id="createGroupSection" style="display: none;">
                    <h4 class="section-title">Create New Group</h4>
                    <div class="form-group">
                        <input type="text" id="newGroupName" placeholder="Group name">
                    </div>
                    <button class="auth-btn" id="createGroupBtn">Create Group</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Page -->
    <div class="container chat-page" id="chatPage">
        <div class="chat-header">
            <button class="back-btn" id="backBtn">←</button>
            <h2 class="chat-group-name" id="currentGroupName">Group Name</h2>
        </div>

        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be loaded here -->
            </div>

            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type a message...">
                <button id="sendMessageBtn">Send</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAGr5AP3Qk_EQPsCW4adGTBfAN1BHP6gjc",
            authDomain: "sobostem-app.firebaseapp.com",
            projectId: "sobostem-app",
            storageBucket: "sobostem-app.firebasestorage.app",
            messagingSenderId: "221601657929",
            appId: "1:221601657929:web:506dc768b83c2aab68bb98"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // DOM Elements
        const loginContainer = document.getElementById('loginContainer');
        const signupContainer = document.getElementById('signupContainer');
        const dashboard = document.getElementById('dashboard');
        const chatPage = document.getElementById('chatPage');
        
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const logoutBtn = document.getElementById('logoutBtn');
        
        const showSignupLink = document.getElementById('showSignup');
        const showLoginLink = document.getElementById('showLogin');
        
        const loginError = document.getElementById('loginError');
        const signupError = document.getElementById('signupError');
        
        const announcementText = document.getElementById('announcementText');
        const postAnnouncementBtn = document.getElementById('postAnnouncement');
        const announcementsList = document.getElementById('announcementsList');
        
        const groupsList = document.getElementById('groupsList');
        const createGroupSection = document.getElementById('createGroupSection');
        const newGroupName = document.getElementById('newGroupName');
        const createGroupBtn = document.getElementById('createGroupBtn');
        
        const backBtn = document.getElementById('backBtn');
        const currentGroupName = document.getElementById('currentGroupName');
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        
        // Current user data
        let currentUser = null;
        let currentUserData = null;
        let currentGroupId = null;

        // Display error message
        function showError(element, message) {
            element.textContent = message;
            element.style.display = 'block';
        }

        // Toggle between login and signup
        showSignupLink.addEventListener('click', (e) => {
            e.preventDefault();
            loginContainer.style.display = 'none';
            signupContainer.style.display = 'block';
        });

        showLoginLink.addEventListener('click', (e) => {
            e.preventDefault();
            signupContainer.style.display = 'none';
            loginContainer.style.display = 'block';
        });

        // Login form submission
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                loginError.style.display = 'none';
            } catch (error) {
                showError(loginError, error.message);
            }
        });

        // Signup form submission
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const role = document.querySelector('input[name="role"]:checked').value;
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Save additional user data to Firestore
                await db.collection('users').doc(user.uid).set({
                    name,
                    email,
                    role,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                signupError.style.display = 'none';
            } catch (error) {
                showError(signupError, error.message);
            }
        });

        // Logout functionality
        logoutBtn.addEventListener('click', async () => {
            try {
                await auth.signOut();
            } catch (error) {
                console.error('Error signing out:', error);
            }
        });

        // Auth state changes (login/logout)
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                // Get user data from Firestore
                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    if (userDoc.exists) {
                        currentUserData = userDoc.data();
                        
                        // Show/hide create group button based on role
                        if (currentUserData.role === 'teacher') {
                            createGroupSection.style.display = 'block';
                        } else {
                            createGroupSection.style.display = 'none';
                        }
                        
                        // Load announcements and groups
                        loadAnnouncements();
                        loadGroups();
                        
                        // Show dashboard, hide auth container
                        loginContainer.style.display = 'none';
                        signupContainer.style.display = 'none';
                        dashboard.style.display = 'block';
                        chatPage.style.display = 'none';
                    }
                } catch (error) {
                    console.error('Error fetching user data:', error);
                }
            } else {
                // User is logged out, show login form
                currentUser = null;
                currentUserData = null;
                loginContainer.style.display = 'block';
                signupContainer.style.display = 'none';
                dashboard.style.display = 'none';
                chatPage.style.display = 'none';
            }
        });

        // Post announcement
        postAnnouncementBtn.addEventListener('click', async () => {
            const text = announcementText.value.trim();
            if (!text) return;
            
            try {
                await db.collection('announcements').add({
                    text,
                    authorId: currentUser.uid,
                    authorName: currentUserData.name,
                    authorRole: currentUserData.role,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    likes: []
                });
                
                announcementText.value = '';
            } catch (error) {
                console.error('Error posting announcement:', error);
            }
        });

        // Load announcements
        function loadAnnouncements() {
            db.collection('announcements')
                .orderBy('createdAt', 'desc')
                .onSnapshot(snapshot => {
                    announcementsList.innerHTML = '';
                    
                    snapshot.forEach(doc => {
                        const announcement = doc.data();
                        const id = doc.id;
                        const isLiked = announcement.likes && announcement.likes.includes(currentUser.uid);
                        
                        const div = document.createElement('div');
                        div.className = 'announcement';
                        div.innerHTML = `
                            <div class="announcement-header">
                                <span class="announcement-author">${announcement.authorName} (${announcement.authorRole})</span>
                                <span class="announcement-date">${formatDate(announcement.createdAt)}</span>
                            </div>
                            <div class="announcement-content">${announcement.text}</div>
                            <div class="announcement-actions">
                                <button class="like-btn ${isLiked ? 'liked' : ''}" data-id="${id}">
                                    ❤ ${announcement.likes ? announcement.likes.length : 0}
                                </button>
                                <button class="comment-btn" data-id="${id}">
                                    💬 Comment
                                </button>
                            </div>
                            <div class="comment-form">
                                <input type="text" class="comment-input" placeholder="Write a comment...">
                                <button class="comment-submit" data-id="${id}">Submit</button>
                            </div>
                            <div class="comments" id="comments-${id}">
                                <!-- Comments will be loaded here -->
                            </div>
                        `;
                        
                        announcementsList.appendChild(div);
                        
                        // Load comments for this announcement
                        loadComments(id);
                        
                        // Add event listeners for like button
                        const likeBtn = div.querySelector('.like-btn');
                        likeBtn.addEventListener('click', () => {
                            toggleLike(id, isLiked);
                        });
                        
                        // Add event listener for comment submit
                        const commentSubmit = div.querySelector('.comment-submit');
                        const commentInput = div.querySelector('.comment-input');
                        
                        commentSubmit.addEventListener('click', () => {
                            const text = commentInput.value.trim();
                            if (text) {
                                addComment(id, text);
                                commentInput.value = '';
                            }
                        });
                    });
                });
        }

        // Toggle like on announcement
        async function toggleLike(announcementId, isLiked) {
            try {
                const announcementRef = db.collection('announcements').doc(announcementId);
                
                if (isLiked) {
                    // Remove like
                    await announcementRef.update({
                        likes: firebase.firestore.FieldValue.arrayRemove(currentUser.uid)
                    });
                } else {
                    // Add like
                    await announcementRef.update({
                        likes: firebase.firestore.FieldValue.arrayUnion(currentUser.uid)
                    });
                }
            } catch (error) {
                console.error('Error toggling like:', error);
            }
        }

        // Add comment to announcement
        async function addComment(announcementId, text) {
            try {
                await db.collection('announcements').doc(announcementId)
                    .collection('comments').add({
                        text,
                        authorId: currentUser.uid,
                        authorName: currentUserData.name,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
            } catch (error) {
                console.error('Error adding comment:', error);
            }
        }

        // Load comments for an announcement
        function loadComments(announcementId) {
            const commentsContainer = document.getElementById(`comments-${announcementId}`);
            
            db.collection('announcements').doc(announcementId)
                .collection('comments')
                .orderBy('createdAt')
                .onSnapshot(snapshot => {
                    commentsContainer.innerHTML = '';
                    
                    snapshot.forEach(doc => {
                        const comment = doc.data();
                        
                        const div = document.createElement('div');
                        div.className = 'comment';
                        div.innerHTML = `
                            <span class="comment-author">${comment.authorName}:</span>
                            <span class="comment-text">${comment.text}</span>
                        `;
                        
                        commentsContainer.appendChild(div);
                    });
                });
        }

        // Format date for display
        function formatDate(timestamp) {
            if (!timestamp) return 'Just now';
            
            const date = timestamp.toDate();
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
        }

        // Create a new group (for teachers)
        createGroupBtn.addEventListener('click', async () => {
            const name = newGroupName.value.trim();
            if (!name) return;
            
            try {
                await db.collection('groups').add({
                    name,
                    createdBy: currentUser.uid,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                newGroupName.value = '';
            } catch (error) {
                console.error('Error creating group:', error);
            }
        });

        // Load groups
        function loadGroups() {
            db.collection('groups')
                .orderBy('createdAt')
                .onSnapshot(snapshot => {
                    groupsList.innerHTML = '';
                    
                    snapshot.forEach(doc => {
                        const group = doc.data();
                        const id = doc.id;
                        
                        const li = document.createElement('li');
                        li.className = 'group-item';
                        li.textContent = group.name;
                        li.dataset.id = id;
                        li.dataset.name = group.name;
                        
                        li.addEventListener('click', () => {
                            openGroupChat(id, group.name);
                        });
                        
                        groupsList.appendChild(li);
                    });
                });
        }

        // Open group chat
        function openGroupChat(groupId, groupName) {
            currentGroupId = groupId;
            currentGroupName.textContent = groupName;
            
            // Show chat page, hide dashboard
            dashboard.style.display = 'none';
            chatPage.style.display = 'block';
            
            // Load messages
            loadMessages(groupId);
        }

        // Load messages for a group
        function loadMessages(groupId) {
            db.collection('groups').doc(groupId)
                .collection('messages')
                .orderBy('createdAt')
                .onSnapshot(snapshot => {
                    chatMessages.innerHTML = '';
                    
                    snapshot.forEach(doc => {
                        const message = doc.data();
                        const isSelf = message.authorId === currentUser.uid;
                        
                        const div = document.createElement('div');
                        div.className = `message ${isSelf ? 'message-self' : ''}`;
                        div.innerHTML = `
                            <div class="message-bubble">${message.text}</div>
                            <div class="message-info">
                                <span class="message-author">${message.authorName}</span>
                                <span class="message-time">${formatDate(message.createdAt)}</span>
                            </div>
                        `;
                        
                        chatMessages.appendChild(div);
                    });
                    
                    // Scroll to bottom of messages
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                });
        }

        // Send message in group chat
        sendMessageBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        async function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            try {
                await db.collection('groups').doc(currentGroupId)
                    .collection('messages').add({
                        text,
                        authorId: currentUser.uid,
                        authorName: currentUserData.name,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                
                messageInput.value = '';
            } catch (error) {
                console.error('Error sending message:', error);
            }
        }

        // Back button to return to dashboard
        backBtn.addEventListener('click', () => {
            chatPage.style.display = 'none';
            dashboard.style.display = 'block';
            currentGroupId = null;
        });
    </script>
</body>
</html>